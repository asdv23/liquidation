generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Loan {
  id                 Int       @id @default(autoincrement())
  chain              String
  userAddress        String
  borrowTxHash       String
  borrowTime         DateTime
  repayTxHash        String?
  repayTime          DateTime?
  liquidateTxHash    String?
  liquidateTime      DateTime?
  lastHealthFactor   Decimal?
  status             String
  healthHistory      LoanHealthHistory[]
}

model LoanHealthHistory {
  id           Int      @id @default(autoincrement())
  loan         Loan     @relation(fields: [loanId], references: [id])
  loanId       Int
  checkTime    DateTime
  healthFactor Decimal
} 